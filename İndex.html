<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Cebimde Hava - TÃ¼rkiye 81 Ä°l</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Leaflet ve Heatmap kÃ¼tÃ¼phaneleri -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>

<style>
body{margin:0;font-family:Arial;background:#0b1220;color:#fff}
header{background:#081a2f;padding:15px;font-size:24px;font-weight:bold;text-align:center;color:#4fc3f7}
#map{height:65vh;width:100%;}
#panel{padding:10px;text-align:center;background:#111c2e;}
#info{padding:15px;text-align:center;background:#111c2e;}
.marker-icon {
  width:40px; height:40px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  color:#fff; font-weight:bold; text-align:center;
  border:2px solid #fff; cursor:pointer; box-shadow:0 0 5px #000;
}
.marker-don{background:#1565c0;}
.marker-kar{background:#fff;color:#000;}
.marker-yagmur{background:#4fc3f7;color:#000;}
#timeline{padding:10px;background:#111c2e;margin-top:10px;border-radius:8px;}
</style>
</head>
<body>
<header>ğŸŒ¦ï¸ Cebimde Hava - TÃ¼rkiye 81 Ä°l</header>

<div id="panel">
<input id="search" placeholder="Ä°l ara (Ã¶rn: Erzurum)" style="width:90%;padding:10px;border-radius:8px;border:none;font-size:16px">
</div>

<div id="map"></div>
<div id="info">Haritada bir ile dokun ğŸ‘†</div>

<div id="timeline">
<b>SoÄŸuk / IsÄ±nma Tahmini:</b>
<ul>
<li>Ocak sonu: SÄ±caklÄ±k artÄ±ÅŸÄ± ğŸŒ¤ï¸</li>
<li>Åubat baÅŸÄ±: SoÄŸuma ihtimali â„ï¸</li>
</ul>
</div>

<script>
const apiKey="4f0f2a01c4f7d40c476284eb0ef287a5";

// TÃ¼rkiye 81 ilin koordinatlarÄ±
const cities=[["Adana",37.0,35.3213],["AdÄ±yaman",37.7648,38.2786],["Afyonkarahisar",38.7638,30.5408],
["AÄŸrÄ±",39.7191,43.0500],["Amasya",40.6539,35.8335],["Ankara",39.9334,32.8597],
["Antalya",36.8969,30.7133],["Artvin",41.1828,41.8190],["AydÄ±n",37.8497,27.8450],
["BalÄ±kesir",39.6484,27.8826],["Bilecik",40.1500,29.9833],["BingÃ¶l",38.8850,40.4969],
["Bitlis",38.4036,42.1106],["Bolu",40.5776,31.5788],["Burdur",37.7203,30.2886],
["Bursa",40.1950,29.0600],["Ã‡anakkale",40.1550,26.4142],["Ã‡ankÄ±rÄ±",40.6013,33.6131],
["Ã‡orum",40.5500,34.9556],["Denizli",37.7765,29.0864],["DiyarbakÄ±r",37.9144,40.2306],
["Edirne",41.6818,26.5623],["ElazÄ±ÄŸ",38.6741,39.2223],["Erzincan",39.7500,39.5000],
["Erzurum",39.9043,41.2679],["EskiÅŸehir",39.7767,30.5206],["Gaziantep",37.0662,37.3833],
["Giresun",40.9128,38.3895],["GÃ¼mÃ¼ÅŸhane",40.4600,39.4800],["Hakkari",37.5744,43.7400],
["Hatay",36.2061,36.1600],["Isparta",37.7648,30.5566],["Mersin",36.8121,34.6415],
["Ä°stanbul",41.0082,28.9784],["Ä°zmir",38.4237,27.1428],["Kars",40.6011,43.0940],
["Kastamonu",41.3784,33.7827],["Kayseri",38.7312,35.4787],["KÄ±rÄ±kkale",39.8468,33.5153],
["KÄ±rklareli",41.7333,27.2167],["KÄ±rÅŸehir",39.1458,34.1703],["Kocaeli",40.7766,29.9400],
["Konya",37.8713,32.4849],["KÃ¼tahya",39.4167,29.9833],["Malatya",38.3556,38.3097],
["Manisa",38.6191,27.4289],["Mardin",37.3120,40.7350],["MuÄŸla",37.2150,28.3636],["MuÅŸ",38.9461,41.7531],
["NevÅŸehir",38.6244,34.7126],["NiÄŸde",37.9667,34.6833],["Ordu",40.9860,37.8794],["Osmaniye",37.0742,36.2381],
["Rize",41.0201,40.5234],["Sakarya",40.6961,30.4350],["Samsun",41.2867,36.33],["Siirt",37.9333,41.9500],
["Sinop",42.0269,35.1530],["Sivas",39.7477,37.0179],["ÅanlÄ±urfa",37.1670,38.7950],["ÅÄ±rnak",37.4180,42.4910],
["TekirdaÄŸ",40.9833,27.5167],["Tokat",40.3131,36.5547],["Trabzon",41.0027,39.7178],["Tunceli",39.1083,39.5342],
["UÅŸak",38.6824,29.4082],["Van",38.5010,43.4000],["Yozgat",39.8181,34.8147],["Zonguldak",41.4500,31.7833],
["Aksaray",38.3687,34.0369],["Bayburt",40.2550,40.2244],["Karaman",37.1814,33.2154],["Batman",37.8872,41.1320],
["BartÄ±n",41.6350,32.3372],["Ardahan",41.1083,42.7022],["IÄŸdÄ±r",39.8780,44.0040],["Yalova",40.6500,29.2667],
["KarabÃ¼k",41.2053,32.6200],["Kilis",36.7167,37.1167],["DÃ¼zce",40.8433,31.1569]];

const map = L.map('map').setView([39.0,35.0],5);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:18}).addTo(map);

// Ä°l arama
document.getElementById("search").addEventListener("input", e=>{
 const val = e.target.value.toLowerCase();
 const found = cities.find(c=>c[0].toLowerCase().includes(val));
 if(found) map.setView([found[1],found[2]],8);
});

let heatPoints = [];

// TÃ¼m iller iÃ§in marker ve popup
cities.forEach(c=>{
 fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${c[1]}&lon=${c[2]}&units=metric&lang=tr&appid=${apiKey}`)
 .then(res=>res.json())
 .then(data=>{
   let weather = data.weather[0].main;
   let temp = data.main.temp;
   let desc = data.weather[0].description;
   let humidity = data.main.humidity;
   let wind = data.wind.speed;

   let colorClass="marker-don";
   if(weather.includes("Snow")) colorClass="marker-kar";
   else if(weather.includes("Rain")) colorClass="marker-yagmur";

   const myIcon = L.divIcon({
     className:'marker-icon '+colorClass,
     html:`${Math.round(temp)}Â°C`,
     iconSize:[40,40],
     popupAnchor:[0,-20]
   });

   const marker = L.marker([c[1],c[2]],{icon:myIcon}).addTo(map);
   marker.bindPopup(`<b>${c[0]}</b><br>SÄ±caklÄ±k: ${temp}Â°C<br>Nem: ${humidity}%<br>RÃ¼zgar: ${wind} m/s<br>${desc}`);
   marker.on('click',()=>{document.getElementById("info").innerHTML=`<b>${c[0]}</b>: ${temp}Â°C, ${humidity}%, RÃ¼zgar ${wind} m/s, ${desc}`});

   heatPoints.push([c[1],c[2],temp]);
   if(heatPoints.length === cities.length){
       L.heatLayer(heatPoints, {radius: 25, blur: 15, maxZoom: 17}).addTo(map);
   }
 });
});
</script>
</body>
</html>
